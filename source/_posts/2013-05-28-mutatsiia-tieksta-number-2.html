---
layout: post
title: "Мутация текста #2"
date: 2013-05-28 00:41
comments: true
categories: experiment
style_path: /stylesheets/mutatsiia-tieksta-number-2.css
preview: "Цензура? Текст взят из \"Мастера и Маргариты\""
---

<p class="text">
Но никто не отозвался. Тут он взглянул на дверь в кабинет Берлиоза, бывшую рядом с передней, и тут, как говорится, остолбенел. На ручке двери он разглядел огромнейшую сургучную печать на веревке. "Здравствуйте! − рявкнул кто-то в голове у Степы. − Этого еще недоставало!" И тут Степины мысли побежали уже по двойному рельсовому пути, но, как всегда бывает во время катастрофы, в одну сторону и вообще черт знает куда. Головную Степину кашу трудно даже передать. Тут и чертовщина с черным беретом, холодной водкой и невероятным контрактом, − а тут еще ко всему этому, не угодно ли, и печать на двери! То есть кому хотите сказать, что Берлиоз что-то натворил, − не поверит, ей-ей, не поверит! Однако печать, вот она! Да-с…
</p>
<p class="text">
И тут закопошились в мозгу у Степы какие-то неприятнейшие мыслишки о статье, которую, как назло, недавно он всучил Михаилу Александровичу для напечатания в журнале. И статья, между нами говоря, дурацкая! И никчемная, и деньги-то маленькие…
</p>


<script>
$(function(){
	var paragrafsText = [],
    elements = document.getElementsByClassName('text'),
    NODE_TEXT_NAME = 
        ('innerText' in document.getElementsByTagName('html')[0]) ? 
        "innerText" : 
        "textContent", // for cross-browsing
    getCurrentTexts = function() {
        var texts = [];
        for (var i = 0, elementsLengh = elements.length; i < elementsLengh; i++) {
            var textEl = elements[i],
                text = textEl[NODE_TEXT_NAME];
            texts.push(text);
        }
        return texts;
    },
    paragrafsText = getCurrentTexts(),
    buildWordIslands = function() {
        for (var i = 0, paragrafsLength = paragrafsText.length; i < paragrafsLength; i++) {
            var wordsInParagraf = paragrafsText[i].split(' '),
                totatHtml = '',
            	wrappedWords = document.createElement('div');
                //SPACE = '&nbsp;';
            elements[i][NODE_TEXT_NAME] = '';
            for (var j = 0, wordsLength = wordsInParagraf.length; j < wordsLength; j++) {
            	var wordEl = document.createElement('span');
            	wordEl.className = 'word';
            	wordEl[NODE_TEXT_NAME] = wordsInParagraf[j];
            	wrappedWords.appendChild(wordEl);
            }
            elements[i].appendChild(wrappedWords);
        }
    };

    buildWordIslands();
});
</script>